{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PUIUX Client Registry",
  "description": "Schema for client-projects-registry/clients.json",
  "type": "object",
  "required": ["registry_version", "last_updated", "total_clients", "clients"],
  "properties": {
    "registry_version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Semantic version of registry schema"
    },
    "last_updated": {
      "type": "string",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
      "description": "Last update date (YYYY-MM-DD)"
    },
    "total_clients": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of clients (must match clients array length)"
    },
    "clients": {
      "type": "array",
      "description": "Array of client records",
      "items": {
        "type": "object",
        "required": [
          "id",
          "slug",
          "name",
          "tier",
          "pod",
          "stack",
          "repo",
          "repo_visibility",
          "deployment_mode",
          "domains",
          "gates",
          "status",
          "created",
          "updated"
        ],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^client-[a-z0-9]+-[0-9]{3}$",
            "description": "Unique client ID (e.g., client-demo-001)"
          },
          "slug": {
            "type": "string",
            "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
            "minLength": 2,
            "maxLength": 50,
            "description": "URL-safe client identifier (lowercase, hyphens only)"
          },
          "name": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Client display name"
          },
          "tier": {
            "type": "string",
            "enum": ["beta", "standard", "premium", "enterprise"],
            "description": "Client tier level"
          },
          "pod": {
            "type": "string",
            "enum": ["corporate", "ecommerce", "enterprise", "education", "healthcare", "government"],
            "description": "Business pod/category"
          },
          "stack": {
            "type": "string",
            "enum": ["laravel", "node", "nextjs", "wordpress", "custom"],
            "description": "Technology stack"
          },
          "repo": {
            "type": "string",
            "pattern": "^client-[a-z0-9-]+$",
            "description": "GitHub repository name"
          },
          "repo_visibility": {
            "type": "string",
            "enum": ["public", "private"],
            "description": "Repository visibility"
          },
          "deployment_mode": {
            "type": "string",
            "enum": ["ssh", "ftp", "github-pages", "vercel", "aws"],
            "description": "Deployment method"
          },
          "domains": {
            "type": "object",
            "required": ["beta", "staging", "production"],
            "properties": {
              "beta": {
                "type": "string",
                "pattern": "^[a-z0-9.-]+\\.[a-z]{2,}$",
                "description": "Beta domain"
              },
              "staging": {
                "type": "string",
                "pattern": "^[a-z0-9.-]+\\.[a-z]{2,}$",
                "description": "Staging domain"
              },
              "production": {
                "type": "string",
                "pattern": "^[a-z0-9.-]+\\.[a-z]{2,}$",
                "description": "Production domain"
              }
            },
            "additionalProperties": false
          },
          "gates": {
            "type": "object",
            "required": ["payment_verified", "dns_verified"],
            "properties": {
              "payment_verified": {
                "type": "boolean"
              },
              "dns_verified": {
                "type": "boolean"
              },
              "ssl_verified": {
                "type": "boolean"
              },
              "contract_signed": {
                "type": "boolean"
              },
              "proposal_approved": {
                "type": "boolean"
              },
              "requirements_approved": {
                "type": "boolean"
              },
              "qa_passed": {
                "type": "boolean"
              },
              "staging_approved": {
                "type": "boolean"
              },
              "client_approval": {
                "type": "boolean"
              }
            },
            "additionalProperties": false
          },
          "status": {
            "type": "string",
            "enum": ["presales", "active", "on-hold", "completed", "cancelled"],
            "description": "Client project status"
          },
          "presales_stage": {
            "type": "string",
            "pattern": "^PS[0-5]$",
            "description": "Presales stage (PS0-PS5)"
          },
          "delivery_stage": {
            "type": "string",
            "pattern": "^S[0-5]$",
            "description": "Delivery stage (S0-S5)"
          },
          "created": {
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
            "description": "Creation date (YYYY-MM-DD)"
          },
          "updated": {
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
            "description": "Last update date (YYYY-MM-DD)"
          },
          "limits": {
            "type": "object",
            "properties": {
              "storage_gb": {
                "type": "integer",
                "minimum": 0
              },
              "bandwidth_gb": {
                "type": "integer",
                "minimum": 0
              },
              "users": {
                "type": "integer",
                "minimum": 1
              }
            }
          },
          "billing": {
            "type": "object",
            "properties": {
              "plan": {
                "type": "string"
              },
              "total_value": {
                "type": "number",
                "minimum": 0
              },
              "paid": {
                "type": "number",
                "minimum": 0
              },
              "outstanding": {
                "type": "number",
                "minimum": 0
              },
              "invoices": {
                "type": "array",
                "items": {
                  "type": "object"
                }
              }
            }
          },
          "contacts": {
            "type": "object",
            "properties": {
              "primary": {
                "type": "object",
                "required": ["name", "email"],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone": {
                    "type": "string",
                    "pattern": "^\\+?[0-9-() ]+$"
                  }
                }
              }
            }
          },
          "notes": {
            "type": "string",
            "maxLength": 500
          }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": false
}
